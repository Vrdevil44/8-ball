<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover, user-scalable=no" />
  <meta name="theme-color" content="#050a05" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <meta name="apple-mobile-web-app-title" content="8-Ball AR" />
  <meta name="description" content="Real-time AR 8-Ball Pool Assistant ‚Äî cue detection, ghost ball, shot AI" />
  <title>8-Ball AR Pool Assistant</title>
  <link rel="manifest" href="manifest.json" />
  <link rel="apple-touch-icon" href="icon-192.png" />
  <link rel="stylesheet" href="css/style.css" />
</head>
<body>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
     AR Layer  (full-screen: video + canvas overlay)
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div id="ar-overlay">

  <!-- Camera feed ‚Äì sits behind the canvas via z-index -->
  <video id="camera-feed" autoplay playsinline muted></video>

  <!-- Drawing canvas ‚Äì full screen, sits on top of video -->
  <canvas id="ar-canvas"></canvas>

  <!-- ‚îÄ‚îÄ Top HUD strip ‚îÄ‚îÄ -->
  <header id="top-hud">
    <div class="hud-left">
      <span class="logo-mark">üé±</span>
      <span id="ar-status-badge" class="ar-status-badge ar-status-idle">‚óã Off</span>
    </div>
    <div class="hud-centre">
      <span id="ar-status-text" class="status-text">Ready</span>
    </div>
    <div class="hud-right">
      <!-- Mode buttons -->
      <button id="btn-ar"  class="hud-btn primary">üì∑ Start AR</button>
      <button id="btn-xr"  class="hud-btn accent"  style="display:none">‚ú¶ WebXR</button>
      <button id="btn-panel-toggle" class="hud-btn ghost" aria-label="Info panel">‚ò∞</button>
    </div>
  </header>

  <!-- ‚îÄ‚îÄ AR Shot Badge (floating, appears when calibrated) ‚îÄ‚îÄ -->
  <div id="shot-badge" class="shot-badge">
    <div class="badge-row">
      <span class="badge-label">Hit</span>
      <span class="badge-ball">‚Äî</span>
    </div>
    <div class="badge-row">
      <span class="badge-label">Pocket</span>
      <span class="badge-pocket">‚Äî</span>
    </div>
    <div class="badge-row">
      <span class="badge-diff">‚Äî</span>
      <span class="badge-power"></span>
    </div>
  </div>

  <!-- ‚îÄ‚îÄ Cue stick detection badge ‚îÄ‚îÄ -->
  <div id="stick-info" class="stick-badge" style="display:none">
    üéØ Cue 0%
  </div>

  <!-- ‚îÄ‚îÄ Detection stats ‚îÄ‚îÄ -->
  <div id="detect-stats" class="detect-stats">
    <span>üîç <span id="detect-balls">0</span> balls</span>
    <span>conf: <span id="detect-conf">0%</span></span>
  </div>

  <!-- ‚îÄ‚îÄ Bottom Action Bar (AR mode controls) ‚îÄ‚îÄ -->
  <div id="ar-controls" class="bottom-bar" style="display:none">
    <div class="power-row">
      <span class="power-icon">‚ö°</span>
      <input type="range" id="power-slider-ar" min="5" max="100" value="55" class="power-slider" />
      <span id="power-label-ar" class="power-val">55%</span>
    </div>
    <div class="action-row">
      <button id="btn-calibrate"   class="action-btn secondary">Calibrate</button>
      <button id="btn-shoot-ar"    class="action-btn primary">‚ñ∂ Shoot!</button>
      <button id="btn-recalibrate" class="action-btn ghost">Re-cal</button>
    </div>
    <div class="action-row-sm">
      <button id="btn-merge-toggle" class="sm-btn">Auto-merge: ON</button>
      <select id="felt-select" class="sm-btn sel-input">
        <option value="green">Green felt</option>
        <option value="blue">Blue felt</option>
        <option value="tan">Tan felt</option>
      </select>
    </div>
  </div>

  <!-- ‚îÄ‚îÄ Demo mode bottom bar ‚îÄ‚îÄ -->
  <div id="demo-controls" class="bottom-bar demo-bar">
    <div class="power-row">
      <span class="power-icon">‚ö°</span>
      <input type="range" id="power-slider" min="5" max="100" value="55" class="power-slider" />
      <span id="power-label" class="power-val">55%</span>
    </div>
    <div class="action-row">
      <button id="btn-rack"      class="action-btn secondary">Rack</button>
      <button id="btn-shoot"     class="action-btn primary">‚ñ∂ Shoot!</button>
      <button id="btn-new-game"  class="action-btn secondary">New</button>
    </div>
    <div class="action-row-sm">
      <button id="btn-toggle-ai" class="sm-btn accent">AI: ON</button>
      <button id="btn-random"    class="sm-btn">Random</button>
      <input type="number" id="ball-count" min="2" max="15" value="7" class="sm-input" />
    </div>
  </div>

</div><!-- /#ar-overlay -->

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
     Slide-up Info Panel
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<aside id="info-panel" class="info-panel">
  <div class="panel-handle"></div>

  <!-- Game state -->
  <div class="panel-card">
    <h3 class="panel-title">Game State</h3>
    <div class="info-grid">
      <span class="ig-label">Phase</span>
      <span id="phase-badge" class="phase-badge">BREAK</span>
      <span class="ig-label">Turn</span>
      <span id="current-turn" class="ig-val highlight">Player 1</span>
      <span class="ig-label">P1</span>
      <span id="p1-group" class="ig-val">Open</span>
      <span class="ig-label">P2</span>
      <span id="p2-group" class="ig-val">Open</span>
    </div>
  </div>

  <!-- AI Shot info -->
  <div class="panel-card">
    <h3 class="panel-title">AI Recommendation</h3>
    <div id="shot-candidates" class="cand-label">Analysing‚Ä¶</div>
    <div class="info-grid">
      <span class="ig-label">Ball</span>
      <span id="shot-ball" class="ig-val">‚Äî</span>
      <span class="ig-label">Pocket</span>
      <span id="shot-pocket" class="ig-val">‚Äî</span>
      <span class="ig-label">Score</span>
      <span id="shot-score" class="ig-val">‚Äî</span>
      <span class="ig-label">Cut</span>
      <span id="shot-cut" class="ig-val">‚Äî</span>
      <span class="ig-label">Difficulty</span>
      <span id="shot-difficulty" class="ig-val">‚Äî</span>
      <span class="ig-label">Suggested ‚ö°</span>
      <span id="shot-power" class="ig-val highlight">‚Äî</span>
    </div>
  </div>

  <!-- Balls on table -->
  <div class="panel-card">
    <h3 class="panel-title">Balls on Table</h3>
    <div id="balls-remaining" class="balls-grid"></div>
  </div>

  <!-- Training data -->
  <div class="panel-card">
    <h3 class="panel-title">Training Data</h3>
    <div class="action-row">
      <button id="btn-stats"  class="sm-btn">üìä Stats</button>
      <button id="btn-export" class="sm-btn">‚¨á Export JSON</button>
    </div>
  </div>

  <!-- Status text -->
  <div class="panel-card status-card">
    <span id="status-text" class="status-full">Ready</span>
  </div>

</aside>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
     Scripts  (load order matters ‚Äì no bundler)
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<script src="js/constants.js"></script>
<script src="js/physics.js"></script>
<script src="js/gameState.js"></script>
<script src="js/shotEngine.js"></script>
<script src="js/homography.js"></script>
<script src="js/arSession.js"></script>
<script src="js/stickDetector.js"></script>
<script src="js/tracker.js"></script>
<script src="js/training.js"></script>
<script src="js/detection.js"></script>
<script src="js/renderer.js"></script>
<script src="js/app.js"></script>

<!-- Service worker registration -->
<script>
  if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register('sw.js').catch(() => {});
  }
</script>

</body>
</html>
